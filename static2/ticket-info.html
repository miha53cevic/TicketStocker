<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Raleway'>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Allerta+Stencil">
    <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css'>
    <link rel="stylesheet" href="main.css">
    <script src='https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js'></script>
    <script src="mihaSimpleCanvas.js"></script>
    <title> TicketStocker </title>
</head>

<body>

    <a href="#top" class="fa fa-arrow-up fa-lg top-icon button"></a>

    <main class="main">
        <a name="top"></a>

        <header class="header bg-sec-colour">
            <h1 class="header-title"> <a href="client.html" class="header-title">TicketStocker</a> </h1>

            <div class="col justify-content-center relative">
                <input class="search-field" type="search" placeholder="Search">
                <div class="searching-pannel col shadow">
                    <a href="#infoIDStarWarsIII">
                        <div class="search-result row">
                            <img src="images/star_wars3.jpg">
                            <p>Star Wars III</p>
                        </div>
                    </a>
                    <a href="#infoIDStarWarsIX">
                        <div class="search-result row">
                            <img src="images/star_wars.jpg">
                            <p>Star Wars IX</p>
                        </div>
                    </a>
                    <a href="search.html" class="button border0 border-radius0">More</a>
                </div>
            </div>

            <button class="button search-button align-self-center" id="searchButton"><i
                    class="fa fa-search"></i></button>
            <a class="header-item" href="login.html">Login</a>
            <a class="header-item" href="signup.html">SignUp</a>
        </header>

        <div class="container transparent align-items-center">

            <div class="container w100 align-items-center">
                <h1 class="hHeader"> Star Wars III </h1>
            </div>
            <div class="row">
                <div class="container w100 align-items-center">
                    <div class="content">
                        <div class="col" id="time-list">
                            <i class="pHeader">Available times</i>
                            <hr>
                        </div>

                    </div> <!-- Content -->
                </div> <!-- New container -->

                <div class="container w100 align-items-center">
                    <div class="content">
                        <div class="col">
                            <div id="canvasArea"></div><br>
                            <p class="pHeader">Time: <span id="time">11:00</span> </p>
                            <p class="pHeader">Seat: <span id="seat">5</span> </p><br>
                            <div class="row justify-content-center">
                                <p class="pHeader">Amount:</p>
                                <input class="text-field" min="1" max="5" style="width: 3.5rem;" type="number" value="1">
                            </div><br>
                            <button class="button">Buy</button>
                        </div>

                    </div>

                </div> <!-- Content -->
            </div> <!-- New container -->
        </div> <!-- Row -->

        </div> <!-- Main Page Content Container -->

        <br><br><br><br><br><br><br><br><br><br><br><br>

        <footer class="footer">
            <h1>Contact</h1>
            <p>e-mail: miha53cevic</p>
            <p>tel: 123 456 789</p>
        </footer>

    </main>

</body>

<script>
    const search = document.getElementsByClassName('search-field')[0];
    const searchButton = document.getElementById('searchButton');

    search.addEventListener('search', () => {
        document.getElementsByClassName('searching-pannel')[0].style.visibility = 'visible';
    });

    searchButton.addEventListener('click', () => {
        document.getElementsByClassName('searching-pannel')[0].style.visibility = 'visible';
    });

    // Setup time choosing
    const times = ['10:00', '13:00', '16:00', '19:00'];
    times.forEach(element => {
        $("#time-list").append(`<p class="pText pHover">${element}</p>`);
        $("#time-list").append("<hr>");

        $("#time-list").on('click', 'p', function() {
            $("#time").text($(this).text());
        });
    });

    // Setup canvas
    createCanvas(400, 200);
    clear('white');

    const seatCount = {
        x: 20,
        y: 10  
    };
    const w = toInt(WIDTH / seatCount.x);
    const h = toInt(HEIGHT / seatCount.y);
    for (let y = 0; y < seatCount.y; y++) {
        for (let x = 0; x < seatCount.x; x++) {
            const sx = toInt(x * w);
            const sy = toInt(y * h);
            if (Math.random() > 0.95) {
                drawFillRect(sx + 2.5, sy + 2.5, w - 5, h - 5, 'darkred');
            } else {
                drawFillRect(sx + 2.5, sy + 2.5, w - 5, h - 5, 'red');
            }
        }
    }

</script>

</html>